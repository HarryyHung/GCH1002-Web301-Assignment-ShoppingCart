{% extends "base.html.twig" %}
{% block body %}
	<div>
	<div class="row">
	<div class="col-lg-5">
		<form  action="{{ path('search_product_name') }}" method="post">
			<input  type="search" name="keyword" required placeholder="Search by product name">
		</form>
		</div>
		<br>
		<div class="col-lg-2">
		<button class="button"><a href="{{path('view_list_product')}}">refresh</a></button>
		</div>
		{# <h3 class="text text-danger">Total product: {{products|length}}</h3> #}
		<br></br>
		<div class="">
			<select onchange="window.location.href=this.value">
				<option class="">Sort by</option>
				<option value="{{ path('sort_product_price_ascending')}}">Price Ascending</option>
				<option value="{{ path('sort_product_price_descending')}}">Price Descending</option>
                <option value="{{ path('sort_product_name_ascending')}}">Name Ascending</option>
			</select>
		</div>
		</div>
		<br></br>
		<h1 class="text-center">Product List</h1>
		
		<a class="btn btn-default btn-lg active"  href="{{ path('add_product')}}" role="button">Add new Product</a>
		<table class = "table table-striped">
			<thead>
				<tr>
					<th>Product Id</th>
					<th>Product Name</th>
					<th>Product Price</th>
					<th>Product Infomation</th>
					<th>Product category</th>
					<th>Menu</th>
				</tr>
			</thead>
			<tbody>
				{% for product in products %}
					<tr>
						<td>{{ product.id }}
						</td>
						<td>{{ product.name }}</td>
						<td>{{ product.price }}</td>
						<td>{{ product.info }}</td>
						{# get category id from category entity #}
						<td>{{ product.catID.catId }}</td>
						<td>
							<a href="{{ path('view_product_by_id', {'id': product.id })}}">Detail</a>
							<a href="{{ path('edit_product', {'id': product.id })}}">Edit</a>
							<a href="{{ path('delete_product', {'id': product.id })}}" onclick="return confirm('Do you want to delete this product ?');">Delete</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
