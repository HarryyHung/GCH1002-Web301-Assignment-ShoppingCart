{% extends "base.html.twig" %}
{% block body %}
	<div>
		<form  action="{{ path('search_product_name') }}" method="post">
			<input  type="search" name="keyword" required placeholder="Search by product name">
		</form>
		<div>
			<select onchange="window.location.href=this.value">
				<option>Sort by</option>
				<option value="{{ path('sort_product_price_ascending')}}">Price Ascending</option>
				<option value="{{ path('sort_product_price_descending')}}">Price Descending</option>
                <option value="{{ path('sort_product_name_ascending')}}">Name Ascending</option>
			</select>
		</div>
		<h1>Product List</h1>
		<a href="{{ path('add_product')}}">Add new Product</a>
		<table class = "table table-striped">
			<thead>
				<tr>
					<th>Product Id</th>
					<th>Product Name</th>
					<th>Product Price</th>
					<th>Product Infomation</th>
					<th>Product category</th>
					<th>Menu</th>
				</tr>
			</thead>
			<tbody>
				{% for product in products %}
					<tr>
						<td>{{ product.id }}
						</td>
						<td>{{ product.name }}</td>
						<td>{{ product.price }}</td>
						<td>{{ product.info }}</td>
						{# get category id from category entity #}
						<td>{{ product.catID.catId }}</td>
						<td>
							<a href="{{ path('view_product_by_id', {'id': product.id })}}">Detail</a>
							<a href="{{ path('edit_product', {'id': product.id })}}">Edit</a>
							<a href="{{ path('delete_product', {'id': product.id })}}" onclick="return confirm('Do you want to delete this product ?');">Delete</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
